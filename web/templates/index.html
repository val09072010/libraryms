<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
        <script src="/static/js/app.js"></script>
        <link rel="stylesheet" href="/static/css/lms.css">
        {% if page_action %}
            <title>{{ title }}. {{ page_action }}.</title>
        {% else %}
            <title>{{ title }}</title>
        {% endif %}
    </head>
    <body>
        <div class="container">
            <nav class="navbar navbar">
                <div class="container-fluid">
                    <div class="navbar-header">
                        <a href="{{ url_for('index') }}" class="navbar-brand">{{ title }}</a>
                    </div>
                    <ul class="nav navbar-nav">
                        <li><a href="{{ url_for('search') }}">Search</a> </li>
                        <li><a href="{{ url_for('add_book') }}">Add book</a> </li>
                        <li><a href="{{ url_for('authors') }}">Manage authors</a> </li>
                    </ul>
                    <ul class="nav navbar-nav navbar-right">
                        {% if current_user.is_anonymous %}
                            <li>
                                <a href="{{ url_for('login') }}"><span class="glyphicon glyphicon-user"></span> Sign In</a>
                            </li>
                        {% else %}
                            <li>
                                <a href="{{ url_for('logout') }}"><span class="glyphicon glyphicon-log-in"></span> Sign Out</a>
                            </li>
                        {% endif %}
                    </ul>
                </div>
            </nav>

            {% with messages = get_flashed_messages() %}
                {% if messages %}
                    <div class="alert alert-info">
                        <ul>
                            {% for message in messages %}
                                <li>{{ message }}</li>
                            {% endfor %}
                        </ul>
                    </div>
                {% endif %}
            {% endwith %}

            {% if request.path == '/index' or request.path == '/' %}
                <div id="goalsAndReqsCarousel" class="carousel slide" data-ride="carousel">
                    <!-- Indicators -->
                    <ol class="carousel-indicators">
                        <li data-target="#goalsAndReqsCarousel" data-slide-to="0" class="active"></li>
                        <li data-target="#goalsAndReqsCarousel" data-slide-to="1"></li>
                        <li data-target="#goalsAndReqsCarousel" data-slide-to="2"></li>
                        <li data-target="#goalsAndReqsCarousel" data-slide-to="3"></li>
                        <li data-target="#goalsAndReqsCarousel" data-slide-to="4"></li>
                        <li data-target="#goalsAndReqsCarousel" data-slide-to="5"></li>
                        <li data-target="#goalsAndReqsCarousel" data-slide-to="6"></li>
                    </ol>
                    <!-- Wrapper for slides -->
                    <div class="carousel-inner" role="listbox">
                        <div class="item active">
                            <img src="static/img/back_1.png" alt="" width="100%">
                            <div class="carousel-caption">
                                <h4>Цель: Написать тестовое web-приложение по управлению электронной библиотекой</h4>
                                <div class="alert alert-success">Inspired by https://toster.ru/q/176427</div>
                                <p>Критерии и требования</p>
                                <ul>
                                    <li>Управление списком книг: добавить / удалить / редактировать книгу</li>
                                    <li>Управление списком авторов: добавить / удалить / редактировать автора</li>
                                    <li>Запись о книге содержит следующие данные: ID, Название, Жанр</li>
                                    <li>Запись об авторе содержит следующие данные: ID, Имя, Фамилия</li>
                                    <li>Свзязь между книгами и авторами — многие ко многим</li>
                                </ul>
                            </div>
                        </div>
                        <div class="item">
                            <img src="static/img/back_2.png" alt="" width="100%">
                            <div class="carousel-caption">
                                <h3>Поиск книг по названию либо автору (доступно анонимному пользователю при наличии аутентификации)</h3>
                            </div>
                        </div>
                        <div class="item">
                            <img src="static/img/back_3.png" alt="" width="100%">
                            <div class="carousel-caption">
                                <h3>Аутентификации и авторизация (по желанию кандидата)</h3>
                            </div>
                        </div>
                        <div class="item">
                            <img src="static/img/back_1.png" alt="" width="100%">
                            <div class="carousel-caption">
                                <h3>Технологии, которые должны быть задействованы</h3>
                                <ul>
                                    <li>Flask</li>
                                    <li>SQLAlchemy (Declarative)</li>
                                    <li>SQLite (встроенный в приложение)</li>
                                    <li>Jinja2 Templates</li>
                                    <li>WTForms</li>
                                    <li><del>jQuery (желательно, но возможно использование альтернативных решений)</del></li>
                                </ul>
                            </div>
                        </div>
                        <div class="item">
                            <img src="static/img/back_2.png" alt="" width="100%">
                            <div class="carousel-caption">
                                <h3>Дополнительные требования</h3>
                                <ul>
                                    <li>Код проекта должен быть доступен на сервисе github.org <del>или bitbucket.org</del></li>
                                    <li>Проект должен содержать SQL скрипт для развертывания базы данных и наполнения ее тестовыми данными</li>
                                    <li>Пользовательские данные должны проверяться перед сохранением в БД</li>
                                </ul>
                            </div>
                        </div>
                        <div class="item">
                            <img src="static/img/back_3.png" alt="" width="100%">
                            <div class="carousel-caption">
                                <h3>Дополнительные знания</h3>
                                <ul>
                                    <li>HTTP</li>
                                    <li><del>WSGI</del></li>
                                    <li><del>SQL, Transactions, Transaction Isolation Levels</del></li>
                                    <li>SQLAlchemy</li>
                                    <li><del>Уязвимости веб-сайтов</del></li>
                                    <li><del>User Experience</del></li>
                                </ul>
                            </div>
                        </div>
                        <div class="item">
                            <img src="static/img/back_1.png" alt="" width="100%">
                            <div class="carousel-caption">
                                <h3>RoadMap</h3>
                                <ul>
                                    <li>Bootstrap</li>
                                    <li>AJAX</li>
                                    <li>Migrate to PostrgreSQL</li>
                                    <li>SQLAlchemy</li>
                                    <li>Multi-language support</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <!-- Left and right controls -->
                    <a class="left carousel-control" href="#goalsAndReqsCarousel" data-slide="prev">
                        <span class="glyphicon glyphicon-chevron-left"></span>
                        <span class="sr-only">Previous</span>
                    </a>

                    <a class="right carousel-control" href="#goalsAndReqsCarousel" data-slide="next">
                        <span class="glyphicon glyphicon-chevron-right"></span>
                        <span class="sr-only">Next</span>
                    </a>
                </div>
                <br />
            {% else %}
                {% if current_user.is_anonymous %}
                    <h4>Guest, welcome to LMS. {{ page_action }} </h4>
                {% else %}
                    <h4>{{ current_user.login }}, welcome to LMS. {{ page_action }} </h4>
                {% endif %}
            {% endif %}

            <div class="well-lg">
                {% block content %}
                {% endblock %}
            </div>
        </div>
    </body>
</html>
